---
title: "Título del trabajo grupal"
subtitle: "Análisis de Datos Multinivel"
author: "Paula Córdova, Jesús Díaz Molina, Benjamín Zavala"
date: "2025-05-28"
lang: es
format: html
editor: visual
---

# Introducción

La migración es hoy en día uno de los fenómenos más contingentes a nivel mundial, de acuerdo a la ONU (s.f.) el número de migrantes a nivel internacional corresponde a 304 millones de personas aproximadamente, un número que se ha duplicado desde 1990. Estos procesos migratorios pueden explicarse por diversos factores, como lo pueden ser los económicos, sociales, políticos, demográficos y ecológicos (Armijos-Orellana et al, 2022), por lo que debe comprenderse como un fenómeno multicausal en el que influyen cuestiones no solo individuales, sino también contextuales, como lo pueden ser una crisis económica a nivel nacional, crisis políticas, conflictos bélicos, desplazamiento por riesgos socionaturales, etc. 

Ante el aumento de los flujos migratorios, han aparecido también discursos que presentan una mala percepción hacia las personas migrantes, cayendo directamente en posiciones anti migrantes y discriminatorias que se pueden ver reflejadas en fenómenos políticos de nivel global como lo es el auge de la extrema derecha. Diversos estudios han dado cuenta de que existe una relación entre las posiciones de derecha más extremas y una mala percepción hacia la migración (Servicio Jesuita a Migrantes, 2020; Akkerman, 2018) en conjunto a una tendencia hacia posiciones más nacionalistas o bajo discursos, denominados por las mismas personas, “patriotas” que suelen ir de la mano con una negatividad hacia la migración (Akkerman, 2018; Buraschi y Aguilar-Idañez, 2023), estas posiciones, también suelen manifestarse más en hombres (SJM, 2020). La percepción hacia la migración también se puede ver influida por cuestiones como un régimen más democrático o liberal respecto a políticas de migración (Romero, 2021), donde en aquellos países con una política más democrática presentan una mejor percepción de las personas migrantes.

Por otro lado, factores individuales como lo pueden ser el nivel educativo o el nivel socioeconómico pueden influir en una percepción negativa hacia la migración, producto de que existiría una posible competencia entre las personas migrantes y las personas de menor nivel educacional o bajos ingresos por aquellas ocupaciones de menor complejización (Romero, 2021; Emmenegger y Klemmensen, 2013). Los países que suelen tener un mayor nivel de desarrollo en diversos indicadores como el índice de desarrollo humano, o mayores niveles de educación, suelen recibir mayor migración. como lo muestran los informes OCDE (2024) que dan cuenta de cómo existe un aumento de la migración hacia gran parte de los países pertenecientes a este, por lo que la percepción hacia la migración puede verse afectada por el desarrollo de un país al existir una mayor migración ante un mayor nivel de desarrollo.

Como se muestra con lo comentado anteriormente, vemos como el fenómeno migratorio y las percepciones hacia este constituyen una cuestión fundamental a nivel global, en tanto la migración así como la oposición a esta van en aumento durante los últimos años por lo que el estudio de la percepción hacia la migración se vuelve contingente. Para estudiar esto se debe analizar cuestiones contextuales y factores individuales que darían cuenta de una mayor apreciación u oposición hacia la migración, y al transformarse en un fenómeno global, se vuelve interesante el análisis desde una perspectiva multinivel que considere factores contextuales de cada país que permita conocer cómo varían las percepciones sobre migración no solo considerando cuestiones individuales.

# Variables

```{r librerias, echo=FALSE, warning=FALSE, message=FALSE, collapse=TRUE}
if (!require("pacman")) install.packages("pacman") # solo la primera vez
pacman::p_load(lme4,
               reghelper,
               haven,
               stargazer,
               ggplot2, # gráficos
               texreg, # tablas de regresion (screenreg)
               dplyr) # manipulacion de datos
           

options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo
```

```{r datos, echo=FALSE, warning=FALSE, message=FALSE}
load(file="output/data.RData")
```

Para esta investigación se utilizarán datos rescatados de la séptima ola del World Values Survey (WVS), recolectados entre 2017 y 2022. Esta base de datos incluye aproximadamente 80.000 casos distribuidos en 66 países. Con esto, es posible construir una estructura de datos de dos niveles: nivel 1 (personas) y nivel 2 (países). 

Para la construcción del modelo se consideró como variable de anidación el país de residencia de las personas encuestadas. 

Respecto a la variable dependiente se elaboró una escala sumativa de actitudes hacia la migración a partir de 9 ítems, codificados en una escala de 0 a 18, donde el valor más alto (18) indica una actitud negativa hacia la migración y el valor más bajo (0) indica una actitud positiva frente a la migración. Los ítems considerados fueron: Q122. Ocupan vacantes laborales importantes; Q123. Enriquecen la diversidad cultural; Q124. Aumentan la tasa de criminalidad; Q125. Brindar asilo a personas refugiadas políticas perseguidas en otros países; Q126. Aumentan el riesgo de terrorismo ; Q127. Ofrecen a personas de países pobres una mejor calidad de vida; Q128. Incrementan el desempleo; y Q129. Generan conflictos sociales. Cada uno de estos ítems tenían tres posibilidades de respuesta: De acuerdo (2); Difícil de decir (1); En desacuerdo (0). Para que todas las afirmaciones apuntaran en la misma dirección dentro de la escala, se recodificaron cuatro ítems (Q122; Q123; Q125; Q127) invirtiendo los valores de las categorías extremas: De acuerdo como 0 y En desacuerdo como 2. Finalmente, se incluyó el ítem Q121. ¿Cómo evaluaría el impacto de estas personas en el desarrollo de su país? Esta pregunta utiliza una escala Likert que va de Muy bueno (5) a Muy malo (1). Para mantener la coherencia con la dirección de la escala general, se recodificaron las categorías 1 y 2 como 2, la categoría 3 como 1, y las categorías 4 y 5 como 0. 

Las variables independientes a nivel individual son: el ingreso relativo del hogar (Q288) que consta de una escala de 1 a 10, siendo 1 el grupo más bajo y 10 el más alto; el sexo de la persona encuestada (Q260), variable que fue recodificada: 0 = Masculino y 1 = Femenino; y finalmente la autoubicación ideológica en el eje izquierda-derecha (Q240) que consta de una escala del 1 (más a la izquierda) al 10 (más a la derecha). 

Por otro lado, se consideró como variable independiente agregada el orgullo nacional (Q254) cuyas opciones de respuesta van desde Muy orgullosa/o (1) a No soy \[nacionalidad del país\] (5). Otra variable considerada fue el índice de democracia institucionalizada que va de 0 a 10, según datos de Polity V de 2018. También se consideró la variable de años promedio de escolaridad proveniente de datos de la UNESCO de 2018. Finalmente se consideró el Índice de Desarrollo Humano (IDH) como una medida agregada del nivel de desarrollo de cada país.

```{r, echo=FALSE, warning=FALSE, message=FALSE, results='hide'}
data_desc = data %>% 
  select(perc_mig, sexo, nacionalismo, democ, pos_pol,
           meanschooling, hdi, giniWB, personal_income) %>%
  as.data.frame()
names_data <- names(data)

table_1 <- stargazer(data_desc, type = "html") #Descriptivos de la base de las variables seleccionadas

```

En la @tbl-desc

```{r tbl-desc, echo=FALSE, warning=FALSE, message=FALSE, results='asis'}
#| label: tbl-desc
#| tbl-cap: "Descriptivos variables"
#| tbl-cap-location: top
#| warning: false
cat(table_1, sep = "\n")
```

# Análisis

```{r, echo=FALSE, warning=FALSE, message=FALSE}
results_0 = lmer(perc_mig ~ 1 + (1 | pais), data = data)
Null_model <- summary(results_0)
ICC <- reghelper::ICC(results_0)
```

Nuestra correlación intraclase calculada a partir del modelo nulo es de `r ICC`

```{r, echo=FALSE, warning=FALSE, message=FALSE}
results_1 = lmer(perc_mig ~ 1 + sexo + pos_pol + nacionalismo + personal_income + (1 | pais), data = data)
modelo_1 <- screenreg(results_1, naive=TRUE) #Modelo 1, variables individuales

ICC_1 <- reghelper::ICC(results_1)

```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
results_2 = lmer(perc_mig ~ 1 + democ + hdi + giniWB + meanschooling + (1 | pais), data = data)
modelo_2 <- screenreg(results_2)#Modelo 2, variables contextuales

ICC_2 <- reghelper::ICC(results_2)

```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
results_3 = lmer(perc_mig ~ 1 + democ + hdi + giniWB + meanschooling + sexo +
                   pos_pol + nacionalismo + personal_income + (1 | pais), data = data)
modelo_3 <- screenreg(results_3) #Modelo 3 multinivel

ICC_3 <- reghelper::ICC(results_3)

```

```{r, echo=FALSE, warning=FALSE, message=FALSE}
reg_ind=lm(perc_mig ~ democ + hdi + giniWB + meanschooling + sexo +
             pos_pol + nacionalismo + personal_income, data=data)

agg_mlm=data %>% group_by(pais) %>% summarise_all(funs(mean))

reg_agg=lm(perc_mig ~ + democ + hdi + giniWB + meanschooling + sexo +
             pos_pol + nacionalismo + personal_income, data=agg_mlm)

modelos_1_2_3 <- screenreg(list(reg_ind, reg_agg, results_3))

#Tabla comparativa entre modelos--

table_modelos <- htmlreg(list(reg_ind, reg_agg, results_3), 
        custom.model.names = c("Individual","Agregado","Multinivel"),    
        custom.coef.names = c("Intercepto", "$democ_{ij}$","$hdi_{ij}$", "$giniWB_{j}$", "$meanschooling_{j}$","$sexo_{j}$",
                              "$pos_pol_{j}$","$nacionalismo_{j}$","$personal_incomel_{j}$"), 
        custom.gof.names=c(NA,NA,NA,NA,NA,NA,NA,
                           "Var:id ($\\tau_{00}$)","Var: Residual ($\\sigma^2$)"),
        custom.note = "%stars. Errores estándar en paréntesis",
        caption="Comparación de modelos Individual, Agregado y Multinivel",
        caption.above=TRUE,
        doctype = FALSE)

```

```{r tbl-modelos, echo=FALSE, results='asis'}
#| label: tbl-modelos
#| tbl-cap: "Comparación Modelos"
#| tbl-cap-location: top
#| warning: false
cat(table_modelos, sep = "\n")
```

En la @tbl-modelos es posible apreciar

# Conclusiones

Aqui redactamos algunas conclusiones, de acuerdo con la [pauta](https://correlacional.netlify.app/trabajos).

# Biliografía

-   
