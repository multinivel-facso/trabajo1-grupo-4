load("~/GitHub/trabajo1-grupo-4/input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.rdata")
pacman::p_load(tidyverse,   # manipulacion datos
sjPlot,      # tablas
confintr,    # IC
gginference, # visualizacion
rempsyc,     # reporte
broom,       # varios
sjmisc,      # para descriptivos
knitr)       # para
table(`WVS_Cross-National_Wave_7_v6_0`$Q287)
table(`WVS_Cross-National_Wave_7_v6_0`$Q288)
table(`WVS_Cross-National_Wave_7_v6_0`$Q121)
library(pacman)
pacman::p_load(tidyverse,   # manipulacion datos
sjPlot,      # tablas
confintr,    # IC
gginference, # visualizacion
rempsyc,     # reporte
broom,       # varios
sjmisc,      # para descriptivos
knitr)       # para
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo
proc_data <- load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
proc_data <- load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
view(proc_data)
rm(list = ls()) # para limpiar el entorno de trabajo
proc_data <- load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
proc_data <- readRDS("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
rm(list = ls()) # para limpiar el entorno de trabajo
load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
View(`WVS_Cross-National_Wave_7_v6_0`)
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1, niv_educ=Q275, nacionalismo=Q254, )
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,  )
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindex, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288)
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288)
## Remover NA's ----------------------------------------------------------------
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>%
na.omit()
## Remover NA's ----------------------------------------------------------------
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>%
na.omit()
View(data)
table(`WVS_Cross-National_Wave_7_v6_0`%B_COUNTRY)
table(`WVS_Cross-National_Wave_7_v6_0`$B_COUNTRY)
table(`WVS_Cross-National_Wave_7_v6_0`$pais)
View(data)
table(data$pais)
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288)
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>%
na.omit()
table(data$pais)
table(data_2$pais)
View(`WVS_Cross-National_Wave_7_v6_0`)
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con variables contextuales
View(data)
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288)
## Remover NA's ----------------------------------------------------------------
colSums(is.na(data))
colSums(is.na(data_2))
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
## Remover NA's ----------------------------------------------------------------
colSums(is.na(data))
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129,
Q251, personal_income=Q288) #con variables contextuales sin alfabetismo
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>%
na.omit()
na.omit()
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>% na.omit()
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129,
Q251, personal_income=Q288) #con variables contextuales sin alfabetismo
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>% na.omit()
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>%
na.omit()
## Remover NA's ----------------------------------------------------------------
colSums(is.na(data))
colSums(is.na(data_2))
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129,
Q251, personal_income=Q288) #con variables contextuales sin alfabetismo
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data_2))
## Remover NA's ----------------------------------------------------------------
colSums(is.na(data))
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data_2))
View(data_2)
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data_2))
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
rm(list = ls()) # para limpiar el entorno de trabajo
load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275, alf=E1_LITERACY,
nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129,
Q251, personal_income=Q288) #con variables contextuales
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
View(data_2)
View(data)
data_2 <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5))
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5))
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data_2))
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %$% na.omit()
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5)) %>% na.omit()
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275, nacionalismo=Q254, democ, polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129,
Q251, personal_income=Q288) #con variables contextuales, sin alfabetismo
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5, -999, -9999))
## Remover NA's ----------------------------------------------------------------
colSums(is.na(data))
colSums(is.na(data))
colSums(is.na(data_2))
data <- na.omit(data)
data_2 <- na.omit(data_2)
data <- data %>%
mutate(across(c(Q122, Q123, Q125, Q127), ~ case_when(
.x == 2 ~ 0,
.x == 0 ~ 2,
TRUE ~ .x
)))
table(data$Q127)
table(data_2$Q127)
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275, nacionalismo=Q254, democ,
polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128,
Q129, Q251, personal_income=Q288) #con variables contextuales, sin alfabetismo
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data <- data %>%
mutate(across(c(Q122, Q123, Q125, Q127), ~ case_when(
.x == 2 ~ 0,
.x == 0 ~ 2,
TRUE ~ .x
)))
table(data$Q127)
table(data_2$Q127)
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5, -999, -9999))
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data))
colSums(is.na(data_2))
data <- na.omit(data)
data_2 <- na.omit(data_2)
data <- data %>%
mutate(across(c(Q122, Q123, Q125, Q127), ~ case_when(
.x == 2 ~ 0,
.x == 0 ~ 2,
TRUE ~ .x
)))
data <- data %>%
mutate(across(c(sexo), ~ case_when(
.x == 1 ~ 0,
.x == 2 ~ 1,
TRUE ~ .x
)))
View(data)
data <- data %>%
mutate(across(c(Q121), ~ case_when(
.x == 2, 1 ~ 2,
.x == 3 ~ 1,
.x == 4, 5 ~ 0
TRUE ~ .x
data <- data %>%
mutate(across(c(Q121), ~ case_when(
.x == 2, 1 ~ 2,
.x == 3 ~ 1,
.x == 4, 5 ~ 0,
TRUE ~ .x
)))
data <- data %>%
mutate(across(c(Q121), ~ case_when(
.x %in% c(1,2) ~ 2,
.x == 3 ~ 1,
.x %in% c(4, 5) ~ 0,
TRUE ~ .x
)))
data <- data %>%
rowwise() %>%
mutate(perc_mig = mean(c(Q121:Q129))) %>%
ungroup()
table(data$perc_mig)
# Guardar datos ----------------------------------------------------------------
save(data,file="output/data.RData")
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275, nacionalismo=Q254, democ,
polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128,
Q129, Q251, personal_income=Q288) #con variables contextuales, sin alfabetismo
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data <- data %>%
mutate(across(c(Q121), ~ case_when(
.x %in% c(1,2) ~ 2,
.x == 3 ~ 1,
.x %in% c(4, 5) ~ 0,
TRUE ~ .x
)))
table(data$Q121)
table(data_2$Q121)
pacman::p_load(tidyverse,   # manipulacion datos
sjPlot,      # tablas
confintr,    # IC
gginference, # visualizacion
rempsyc,     # reporte
broom,       # varios
sjmisc,      # para descriptivos
knitr)       # para
options(scipen = 999) # para desactivar notacion cientifica
rm(list = ls()) # para limpiar el entorno de trabajo
load("input/data/WVS_Cross-National_Wave_7_Rdata_v6_0.RData")
## Filtrar y seleccionar -------------------------------------------------------
data <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, niv_educ=Q275, nacionalismo=Q254, democ,
polregfh, incomeWB, btidemstatus, meanschooling,
incomeindexHDI, hdi, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128,
Q129, Q251, personal_income=Q288) #con variables contextuales, sin alfabetismo
data_2 <- `WVS_Cross-National_Wave_7_v6_0` %>%
select(pais=B_COUNTRY, sexo=Q260, alf=E1_LITERACY, niv_educ=Q275,
nacionalismo=Q254, Q121, Q122, Q123, Q124, Q125, Q126, Q127, Q128, Q129, Q240,
Q251, personal_income=Q288) #con alfabetismo
data <- data %>%
set_na(., na = c(-1, -2, -3, -4, -5, -999, -9999)) #Recodificamos variables a NA
data_2 <- data_2 %>%
set_na(., na = c(-1, -2, -3, -4, -5))
colSums(is.na(data))
colSums(is.na(data_2))
data <- na.omit(data)
data_2 <- na.omit(data_2)
data <- data %>%
mutate(across(c(Q122, Q123, Q125, Q127), ~ case_when(
.x == 2 ~ 0,
.x == 0 ~ 2,
TRUE ~ .x
))) #recodificado para mantener sentido
data <- data %>%
mutate(across(c(sexo), ~ case_when(
.x == 1 ~ 0,
.x == 2 ~ 1,
TRUE ~ .x
)))
data <- data %>%
mutate(across(c(Q121), ~ case_when(
.x %in% c(1,2) ~ 2,
.x == 3 ~ 1,
.x %in% c(4, 5) ~ 0,
TRUE ~ .x
)))
data <- data %>%
rowwise() %>%
mutate(perc_mig = mean(c(Q121:Q129))) %>%
ungroup() #Escala sumativa percepción de migración
# Guardar datos ----------------------------------------------------------------
save(data,file="output/data.RData")
View(data)
data <- data %>%
mutate(across(c(polregfh), ~ case_when(
.x == 1 ~ 0,
.x == 2 ~ 1,
.x == 3 ~ 2,
TRUE ~ .x
)))
data <- data %>%
rowwise() %>%
mutate(perc_mig = mean(c(Q121:Q129))) %>%
ungroup() #Escala sumativa percepción de migración
# Guardar datos ----------------------------------------------------------------
save(data,file="output/data.RData")
